---
layout: post
title: Я не извозчик, я водитель марсохода
---

Управление ровером на Марсе заметно отличается от управления любым земным транспортным средством. На Земле мы можем управлять транспортом напрямую, используя руль и педали у автомобиля, штурвал у самолета и т.д. Но такой способ управления работает только в случае отсутствия больших задержек в реакции на управляющий сигнал. Согласитесь, трудно управлять машиной, если вслед за поворотом руля автомобиль действительно повернёт через секунду? А что делать, если эта задержка составляет не одну секунду, а 14 минут (13 минут 48 секунд - среднее время прохождения радиосигнала от Земли до Марса, максимальное же время - 24 минуты, минимальное - 3 минуты)? Без смекалки и помощи современных технологий было бы достаточно сложно.

Марсоходами управляют не напрямую, а при помощи последовательностей команд, которые передаются с Земли и выполняются ровером на поверхности Марса. Для этого специалисты JPL (Jet Propulsion Laboratory - Лаборатория реактивного движения NASA) используют набор специализированного программного обеспечения, называемый RSVP (Rover Sequencing and Visualisation Program* - программа для работы с последовательностями и визуализацией движения ровера).

RSVP состоит из двух больших подсистем:

**Подсистема редактирования последовательностей команд** (Rover sequence editor subsystem). Сюда входит модуль RoSE (Rover Sequence Editor). Этот модуль предоставляет удобный графический интерфейс для создания последовательностей команд, которые впоследствии будут визуализированы и отправлены на исполнение.

**Подсистема визуализации** (Visualisation Tools Subsystem). Главную роль в этой подсистеме играет, пожалуй, самый интересный модуль из всей системы, названный HyperDrive. Он представляет из себя мощный инструмент для визуализации ровера в марсианской среде. 

HyperDrive формирует трехмерное представление марсианского ландшафта вокруг марсохода, включая очень точную модель самого ровера. Это позволяет оператору видеть максимально точную реакцию ровера на команды. Визуализация формируется на основе множества данных, включающих в себя панорамные снимки местности, отдельные снимки с различных камер, установленных на марсоходе, наборы данных как о текущем, так и о предыдущих состояниях ровера (положение колес, расположение "руки" с инструментами и т.д.). Сюда же входят и последовательности команд, сгенерированные модулем RoSE. Модель ровера формируется на основе CAD модели, используемой при проектировании и производстве аппарата. 

{% include image.html url="/assets/images/rsvp-ui.jpg" description="Вид марсохода Spirit в представлении модулем HyperDrive.<br> Courtesy NASA/JPL-Caltech." %}

HyperDrive имеет три основных режима визуализации:
- *GodMode (FlyingCamera)* - режим "свободной камеры", которая может перемещаться по визуализированной сцене и позволяет посмотреть на ровер и его окружение с разных сторон.
- *Computer Aided Remote Driving (CARD)* - режим дополненной реальности, в котором на исходные изображения с камер (в отличие от предыдущего режима, в котором используется сгенерированная на основе этих изображений 3D модель ландшафта) подставляется визуализация последовательности команд. Это позволяет сгладить недостатки моделирования поверхности и получить интуитивно понятную картину действий.
- *Simulated camera view* - как и режим CARD, строится на основе исходных изображенй, но представляет симуляцию вида с различных камер, установленных на ровере, который может быть получен после выполнения набора команд.

Предшественником RSVP является система RCW (Rover Control Workstation), которая предназначалось для управления ровером Sojourner миссии Pathfinder. RSVP использовалась для контроля над марсоходами-братьями Spirit и Opportunity, и ныне их последователем, Curiosity. В будущем планируется использовать этот инструмент в миссии Mars 2020.


*Так же может встречаться название Robot Sequencing and Visualization Program


*P.S. Данный пост является моей попыткой разобраться в процессе управления марсианскими роверами, а так же своего рода "пробой пера", т.к. до этого я никогда не писал статей. Вполне вероятно, что пост будет в дальнейшем пополняться, по мере того, как я буду находить новую информацию.*